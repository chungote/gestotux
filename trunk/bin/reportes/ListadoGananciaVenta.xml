<!DOCTYPE openRPTDef>
<report>
 <title>Listado de Venta con ganancias</title>
 <name>LVentaGanancia</name>
 <description>Listado de Venta de productos con calculo de ganancias</description>
 <grid>
  <x>0.05</x>
  <y>0.05</y>
 </grid>
 <size>A4</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>listado</name>
  <sql>SELECT distinct if.texto AS item, 
             if.id_producto AS codigo,             
             SUM( if.cantidad ) AS total_vendido, 
             if.precio_unitario AS precio_venta,
             p.precio_costo AS precio_compra, 
             if.precio_unitario*SUM( if.cantidad ) AS  suma_vendido,
             if.precio_unitario*SUM( if.cantidad )-p.precio_costo*SUM( if.cantidad ) AS ganancia
FROM item_factura AS if 
LEFT JOIN producto AS p ON if.id_producto = p.id 
LEFT JOIN compras_productos AS cp ON if.id_producto = cp.id_producto 
WHERE if.id_producto IS NOT NULL
GROUP BY if.texto</sql>
 </querysource>
 <querysource>
  <name>total</name>
  <sql>SELECT SUM( if.cantidad ) AS cantidad_total, 
             if.precio_unitario*SUM( if.cantidad ) AS total_vendido,
             if.precio_unitario*SUM( if.cantidad )-p.precio_costo*SUM( if.cantidad ) AS ganancia
FROM item_factura AS if 
LEFT JOIN producto AS p ON if.id_producto = p.id 
WHERE if.id_producto IS NOT NULL</sql>
 </querysource>
 <pghead>
  <height>84.1648</height>
  <label>
   <rect>
    <x>1</x>
    <y>3</y>
    <width>707</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Listado de ventas y ganancias entre fechas</string>
  </label>
  <label>
   <rect>
    <x>13</x>
    <y>33</y>
    <width>81</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Fecha desde:</string>
  </label>
  <label>
   <rect>
    <x>176</x>
    <y>32</y>
    <width>81</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Fecha hasta:</string>
  </label>
  <line>
   <xstart>0</xstart>
   <ystart>60</ystart>
   <xend>724</xend>
   <yend>60</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>0</xstart>
   <ystart>80</ystart>
   <xend>724</xend>
   <yend>80</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>-0.579</x>
    <y>58.3</y>
    <width>54.7</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>CÃ³digo</string>
  </label>
  <line>
   <xstart>56.4247</xstart>
   <ystart>60.2406</ystart>
   <xend>56.3409</xend>
   <yend>80.0491</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>61.3371</x>
    <y>60.0343</y>
    <width>270.931</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Detalle</string>
  </label>
  <line>
   <xstart>436.209</xstart>
   <ystart>60.2992</ystart>
   <xend>436.372</xend>
   <yend>80.354</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>184</x>
    <y>59.9</y>
    <width>60.7383</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Cantidad</string>
  </label>
  <label>
   <rect>
    <x>437.029</x>
    <y>59.8536</y>
    <width>34.1</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Cant</string>
  </label>
  <label>
   <rect>
    <x>662.651</x>
    <y>59.3536</y>
    <width>61.7</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Ganancia</string>
  </label>
  <line>
   <xstart>663.384</xstart>
   <ystart>60.0528</ystart>
   <xend>663.546</xend>
   <yend>80.1076</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>600.507</x>
    <y>59.5</y>
    <width>61.7</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Tot Venta</string>
  </label>
  <line>
   <xstart>592.223</xstart>
   <ystart>60.2992</ystart>
   <xend>592.386</xend>
   <yend>80.354</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>532.049</xstart>
   <ystart>60.2992</ystart>
   <xend>532.211</xend>
   <yend>80.1076</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>531.825</x>
    <y>59.8</y>
    <width>57.0182</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>$ Venta</string>
  </label>
  <label>
   <rect>
    <x>474</x>
    <y>59.4</y>
    <width>58.4785</width>
    <height>21.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>$ Compra</string>
  </label>
  <line>
   <xstart>472.86</xstart>
   <ystart>60.0528</ystart>
   <xend>472.776</xend>
   <yend>79.6148</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>1034.28</xstart>
   <ystart>117.434</ystart>
   <xend>1034.44</xend>
   <yend>137.242</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>0.552878</xstart>
   <ystart>137.046</ystart>
   <xend>724.553</xend>
   <yend>137.046</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>1296.95</xstart>
   <ystart>116.941</ystart>
   <xend>1297.11</xend>
   <yend>136.996</yend>
   <weight>0</weight>
  </line>
  <line>
   <xstart>1154.63</xstart>
   <ystart>117.434</ystart>
   <xend>1154.79</xend>
   <yend>137.488</yend>
   <weight>0</weight>
  </line>
 </pghead>
 <section>
  <name>Listado</name>
  <detail>
   <key>
    <query>listado</query>
   </key>
   <height>24.6747</height>
   <field>
    <rect>
     <x>0.561679</x>
     <y>1.26987</y>
     <width>53.1807</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>codigo</column>
    </data>
   </field>
   <field>
    <rect>
     <x>59.1</x>
     <y>0.779</y>
     <width>379</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>item</column>
    </data>
   </field>
   <field>
    <rect>
     <x>437.532</x>
     <y>0.781807</y>
     <width>31.6</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>total_vendido</column>
    </data>
   </field>
   <field>
    <rect>
     <x>474</x>
     <y>1.23</y>
     <width>58.759</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>precio_compra</column>
    </data>
   </field>
   <field>
    <rect>
     <x>535</x>
     <y>1.7</y>
     <width>57.8</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>precio_venta</column>
    </data>
   </field>
   <field>
    <rect>
     <x>595</x>
     <y>1.7</y>
     <width>67.7</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>suma_vendido</column>
    </data>
   </field>
   <field>
    <rect>
     <x>666.3</x>
     <y>-0.66358</y>
     <width>59.3</width>
     <height>25</height>
    </rect>
    <font>
     <face>Times New Roman</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>listado</query>
     <column>ganancia</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>73.597</height>
  <rect>
   <x>429.407</x>
   <y>1.79602</y>
   <width>69.0992</width>
   <height>25</height>
   <weight>1</weight>
  </rect>
  <rect>
   <x>498.232</x>
   <y>1.79602</y>
   <width>109.364</width>
   <height>25</height>
   <weight>1</weight>
  </rect>
  <rect>
   <x>607.587</x>
   <y>1.77562</y>
   <width>109.364</width>
   <height>24.7628</height>
   <weight>1</weight>
  </rect>
  <field>
   <rect>
    <x>437.127</x>
    <y>1.35071</y>
    <width>53.6489</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>total</query>
    <column>cantidad_total</column>
   </data>
  </field>
  <field>
   <rect>
    <x>499</x>
    <y>2.38</y>
    <width>103</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>total</query>
    <column> total_vendido</column>
   </data>
  </field>
  <label>
   <rect>
    <x>429.342</x>
    <y>27.6496</y>
    <width>69.6332</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <top/>
   <string>Cantidad</string>
  </label>
  <label>
   <rect>
    <x>503</x>
    <y>27.9</y>
    <width>101</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <top/>
   <string>Venta total</string>
  </label>
  <label>
   <rect>
    <x>607</x>
    <y>26.9</y>
    <width>110</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <top/>
   <string>Ganancia total</string>
  </label>
  <label>
   <rect>
    <x>1.77</x>
    <y>46.9</y>
    <width>721</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>7</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <bottom/>
   <string>Atencion: Los precios de compra estÃ¡n tomados al momento de hacer el resumen. No se incluyen articulos vendidos que no tengan una referencia de productos.</string>
  </label>
  <label>
   <rect>
    <x>325</x>
    <y>5.3</y>
    <width>100</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Totales:</string>
  </label>
 </pgfoot>
 <rptfoot>
  <height>26.7409</height>
  <label>
   <rect>
    <x>182</x>
    <y>2.34</y>
    <width>359</width>
    <height>16.1</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Listado de ventas de productos y ganancias entre fechas</string>
  </label>
  <field>
   <rect>
    <x>612</x>
    <y>27.6858</y>
    <width>103</width>
    <height>25</height>
   </rect>
   <font>
    <face>Times New Roman</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>total</query>
    <column>ganancia</column>
   </data>
  </field>
 </rptfoot>
</report>
